

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Local Yum Repo (CentOS 7) / 本地Yum源 &mdash; KNWON Blog documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="KNWON Blog documentation" href="../index.html"/>
        <link rel="up" title="Tools" href="Tools.html"/>
        <link rel="next" title="Program As Service at Windows Using NSSM" href="Tools_NSSM_Windows.html"/>
        <link rel="prev" title="Linux Fonts / 字体支持" href="Tools_fonts.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> KNWON
          

          
          </a>

          
            
            
              <div class="version">
                Blog
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Index</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Tools.html">Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="HtmlToPdf.html">HTML To PDF Solutions / HTML 转换 PDF 解决方案</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tools_DiskMount.html">Mount disk to VG / 磁盘挂载到虚拟分区</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tools_fonts.html">Linux Fonts / 字体支持</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Local Yum Repo (CentOS 7) / 本地Yum源</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#intro">Intro 简介</a></li>
<li class="toctree-l3"><a class="reference internal" href="#prepare-the-packages">Prepare the packages / 准备安装包</a></li>
<li class="toctree-l3"><a class="reference internal" href="#use-your-own-repo-yum">Use your own REPO / 使用这个Yum源</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation">Installation / 安装</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reference">Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Tools_NSSM_Windows.html">Program As Service at Windows Using NSSM</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tools_PDFToWord.html">PDF To Word / PDF转Word格式</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tools_RPM.html">Build RPM / 构建 RPM</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tools_Sphinx.html">Sphinx And RST</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Web/Web.html">Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Node/Node.html">Node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Python/Python.html">Python</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">KNWON</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="Tools.html">Tools</a> &raquo;</li>
      
    <li>Local Yum Repo (CentOS 7) / 本地Yum源</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/Tools/Tools_LocalYumRepo.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="local-yum-repo-centos-7-yum">
<h1><a class="toc-backref" href="#id1">Local Yum Repo (CentOS 7) / 本地Yum源</a><a class="headerlink" href="#local-yum-repo-centos-7-yum" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">date:</th><td class="field-body">2017-11-14</td>
</tr>
<tr class="field-even field"><th class="field-name">tags:</th><td class="field-body">Linux, CentOS</td>
</tr>
<tr class="field-odd field"><th class="field-name">category:</th><td class="field-body">Tools</td>
</tr>
<tr class="field-even field"><th class="field-name">slug:</th><td class="field-body">local_yum_repo</td>
</tr>
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Brian Shen</td>
</tr>
<tr class="field-even field"><th class="field-name">summary:</th><td class="field-body">Local Yum Repo</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<span id="local-yum-repo-rst"></span><p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#local-yum-repo-centos-7-yum" id="id1">Local Yum Repo (CentOS 7) / 本地Yum源</a><ul>
<li><a class="reference internal" href="#intro" id="id2">Intro 简介</a></li>
<li><a class="reference internal" href="#prepare-the-packages" id="id3">Prepare the packages / 准备安装包</a></li>
<li><a class="reference internal" href="#use-your-own-repo-yum" id="id4">Use your own REPO / 使用这个Yum源</a></li>
<li><a class="reference internal" href="#installation" id="id5">Installation / 安装</a></li>
<li><a class="reference internal" href="#reference" id="id6">Reference</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="intro">
<h2><a class="toc-backref" href="#id2">Intro 简介</a><a class="headerlink" href="#intro" title="Permalink to this headline">¶</a></h2>
<p>This article is sampled by installing Java.</p>
<p>基于JAVA介绍如何使用本地Yum源。</p>
</div>
<div class="section" id="prepare-the-packages">
<h2><a class="toc-backref" href="#id3">Prepare the packages / 准备安装包</a><a class="headerlink" href="#prepare-the-packages" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Find a clean CentOS with network available.</p>
<blockquote>
<div><p>找一个干净的 CentOS 环境，并且接通网络。</p>
</div></blockquote>
</li>
<li><p class="first">Download Software Packages 下载软件包</p>
<blockquote>
<div><p>To download software and their dependencies, you can just use native <code class="code docutils literal"><span class="pre">yum</span></code> .</p>
<p>只需要使用 <code class="code docutils literal"><span class="pre">yum</span></code> 就可以下载并且解析依赖包。</p>
<ul>
<li><p class="first">Create a folder / 创建文件夹</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>mkdir ais_repo
<span class="nb">cd</span> ais_repo
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Download OpenJDK / 下载 OpenJDK</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>sudo yum install --downloadonly --downloaddir ./ java-1.8.0-openjdk-headless.x86_64
</pre></div>
</div>
<div class="figure">
<img alt="../_images/local_repo_01.png" src="../_images/local_repo_01.png" />
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Make Local Repo / 制作本地 Yum 库</p>
<blockquote>
<div><p>It seems quite hard to create your own repo, since there are lots of package information to create and add.
But actually it is quite simple, and you can just make repo with simple commands.</p>
<p>看起来很是复杂，因为有很多的依赖关系，但实际上，只需要很简单的命令就可以。</p>
<ul>
<li><p class="first">Install <code class="code docutils literal"><span class="pre">createrepo</span></code> / 安装 <code class="code docutils literal"><span class="pre">createrepo</span></code></p>
<blockquote>
<div><p><code class="code docutils literal"><span class="pre">sudo</span> <span class="pre">yum</span> <span class="pre">install</span> <span class="pre">createrepo</span></code></p>
</div></blockquote>
</li>
<li><p class="first">create a directory to put packages and then make repo in that folder</p>
<blockquote>
<div><p>创建一个目录来保存这些安装包。并且，制作安装包的元文件信息。</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo mkdir /usr/share/ais_repo
sudo mv ./* /usr/share/ais_repo
sudo createrepo -v /usr/share/ais_repo
</pre></div>
</div>
<p>Let&#8217;s see what happened: / 看看发生了什么</p>
<div class="figure">
<img alt="../_images/local_repo_02.png" src="../_images/local_repo_02.png" />
</div>
<p>As you can notice, there is an extra folder <code class="code docutils literal"><span class="pre">repodata</span></code> . Now, this is a local repo.</p>
<p>可以看出来，文件夹中多了一个 <code class="code docutils literal"><span class="pre">repodata</span></code> 。</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="use-your-own-repo-yum">
<h2><a class="toc-backref" href="#id4">Use your own REPO / 使用这个Yum源</a><a class="headerlink" href="#use-your-own-repo-yum" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Backup all the repo files. / 备份已经存在的 Yum 源配置文件</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">cd</span> /etc/yum.repos.d/
sudo mkdir bak
sudo mv *.repo ./bak
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Create local repo source file <code class="code docutils literal"><span class="pre">/etc/yum.repos.d/local.repo</span></code></p>
<blockquote>
<div><p>为本地的Yum源添加配置</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1">#name</span>
<span class="o">[</span>local_server<span class="o">]</span>
<span class="c1">#description</span>
<span class="nv">name</span><span class="o">=</span>Thisis a <span class="nb">local</span> repo
<span class="c1">#yum source</span>
<span class="nv">baseurl</span><span class="o">=</span>file:///usr/share/ais_repo
<span class="nv">enabled</span><span class="o">=</span>1
<span class="c1">#check GPG-KEY</span>
<span class="nv">gpgcheck</span><span class="o">=</span>0
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Make local yum source, clear cache and start cache. 清除缓存，开始使用本地Yum源。</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>sudo yum clean all
sudo yum makecache
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#id5">Installation / 安装</a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">cd</span> /usr/share/ais_repo/
sudo yum install java-1.8.0-openjdk-headless-1.8.0.144-0.b01.el7_4.x86_64.rpm
</pre></div>
</div>
</div>
<div class="section" id="reference">
<h2><a class="toc-backref" href="#id6">Reference</a><a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://yq.aliyun.com/ziliao/97558/">https://yq.aliyun.com/ziliao/97558/</a></li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Tools_NSSM_Windows.html" class="btn btn-neutral float-right" title="Program As Service at Windows Using NSSM" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Tools_fonts.html" class="btn btn-neutral" title="Linux Fonts / 字体支持" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, BrianShen.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'Blog',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>