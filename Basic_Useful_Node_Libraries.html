<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Basic Useful Node Libraries</title>
  <link rel="icon" href="/images/logo/logo.png" >
  <link rel="stylesheet" href="https://brianshen1990.github.io/theme/css/main.css" />
</head>

<body class="home">
  <header class="_header">
    <h1>
      <a href="https://brianshen1990.github.io/">
        KNOWN
      </a>
      <a href="https://github.com/brianshen1990" class="_github">
        GitHub
      </a>
    </h1>
  </header>
  <div class="_content">
    <div class="_left">
<section>
  <article>
    <h1 class="_article_header">
      <a href="https://brianshen1990.github.io/Basic_Useful_Node_Libraries.html" rel="bookmark"
          title="Permalink to Basic Useful Node Libraries">Basic Useful Node Libraries
      </a>
    </h1>

    <div class="_article rst-content">
<div class="_articleInfo">
  <table>
    <tr>
      <td>Published:</td>
      <td>Tue 13 August 2019</td>
    </tr>


    <tr>
      <td>By:</td>
      <td>
          <a class="url fn" href="https://brianshen1990.github.io/author/brian-shen.html"></a>Brian Shen</a>
      </td>
    </tr>

  <tr>
    <td>Category:</td>
    <td>Node</td>
  </tr>

    <tr>
      <td>Tags:</td>
      <td>
          <a href="https://brianshen1990.github.io/tag/node.html">Node</a> 
          <a href="https://brianshen1990.github.io/tag/lodash.html">Lodash</a> 
          <a href="https://brianshen1990.github.io/tag/bluebird.html">Bluebird</a> 
          <a href="https://brianshen1990.github.io/tag/superagent.html">Superagent</a> 
      </td>
    </tr>

  </table>
</div>      <div class="contents topic" id="contents">
<span id="id1"></span><p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#lodash" id="id2">Lodash</a></li>
<li><a class="reference internal" href="#bluebird" id="id3">Bluebird</a></li>
<li><a class="reference internal" href="#superagent" id="id4">superagent</a></li>
</ul>
</div>
<div class="section" id="lodash">
<h2>1. <a class="toc-backref" href="#id2">Lodash</a></h2>
<p>A modern JavaScript utility library delivering modularity, performance &amp; extras.</p>
<p>Many features can be replaced with native ES6 now.</p>
<p>Samples:</p>
<ul>
<li><p class="first">Loop for N times</p>
<div class="highlight"><pre><span></span><span class="nx">_</span><span class="p">.</span><span class="nx">times</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="p">(</span><span class="nx">n</span><span class="p">)=&gt;{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">n</span><span class="p">)});</span>
<span class="c1">// 0</span>
<span class="c1">// 1</span>
<span class="c1">// 2</span>
<span class="c1">// 3</span>
<span class="c1">// 4</span>
</pre></div>
</li>
<li><p class="first">Loop through a collection and return a deeply-nested property from each item</p>
<p>The point is it will handle empty attributes automatically.</p>
<div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">ownerArr</span> <span class="o">=</span> <span class="p">[{</span>
  <span class="s2">&quot;owner&quot;</span><span class="o">:</span> <span class="s2">&quot;Colin&quot;</span><span class="p">,</span>
  <span class="s2">&quot;pets&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="s2">&quot;dog1&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;dog2&quot;</span><span class="p">}]</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="s2">&quot;owner&quot;</span><span class="o">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span>
  <span class="s2">&quot;pets&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="s2">&quot;dog3&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;dog4&quot;</span><span class="p">}]</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="s2">&quot;owner&quot;</span><span class="o">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span>
<span class="p">}];</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">ownerArr</span><span class="p">,</span> <span class="s1">&#39;pets[0].name&#39;</span><span class="p">)</span> <span class="p">);</span>
<span class="c1">//  [ &#39;dog1&#39;, &#39;dog3&#39;, undefined ]</span>
</pre></div>
</li>
<li><p class="first">Create an array of N size and populate them with unique values of the same prefix</p>
<div class="highlight"><pre><span></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">_</span><span class="p">.</span><span class="nx">times</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="nx">_</span><span class="p">.</span><span class="nx">uniqueId</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;ball_&#39;</span><span class="p">))</span> <span class="p">);</span>
<span class="c1">// [ &#39;ball_1&#39;, &#39;ball_2&#39;, &#39;ball_3&#39;, &#39;ball_4&#39;, &#39;ball_5&#39;, &#39;ball_6&#39; ]</span>
</pre></div>
</li>
<li><p class="first">Deep Cloning</p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">objA</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;colin&quot;</span><span class="p">,</span>
  <span class="s2">&quot;obj&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;haha&quot;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">objB</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">cloneDeep</span><span class="p">(</span><span class="nx">objA</span><span class="p">);</span>
<span class="nx">objB</span><span class="p">.</span><span class="nx">obj</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;ahaha&quot;</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">objB</span><span class="p">,</span> <span class="nx">objA</span><span class="p">);</span>
<span class="c1">// { name: &#39;colin&#39;, obj: { name: &#39;ahaha&#39; } } { name: &#39;colin&#39;, obj: { name: &#39;haha&#39; } }</span>
</pre></div>
</li>
<li><p class="first">Get Random Number between a range</p>
<div class="highlight"><pre><span></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">_</span><span class="p">.</span><span class="nx">random</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">_</span><span class="p">.</span><span class="nx">random</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span> <span class="p">);</span>
<span class="c1">// 17</span>
<span class="c1">// 17.24617688571962</span>
</pre></div>
</li>
<li><p class="first">delete and pick array attributes</p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">obj7A</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;colin&quot;</span><span class="p">,</span> <span class="s2">&quot;car&quot;</span><span class="o">:</span> <span class="s2">&quot;suzuki&quot;</span><span class="p">};</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">_</span><span class="p">.</span><span class="nx">omit</span><span class="p">(</span><span class="nx">obj7A</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">])</span> <span class="p">);</span> <span class="c1">// {&quot;name&quot;: &quot;colin&quot;}</span>

<span class="kd">let</span> <span class="nx">obj8A</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;colin&quot;</span><span class="p">,</span> <span class="s2">&quot;car&quot;</span><span class="o">:</span> <span class="s2">&quot;suzuki&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="o">:</span> <span class="mi">17</span><span class="p">};</span>
<span class="kd">let</span> <span class="nx">obj8B</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">pick</span><span class="p">(</span><span class="nx">obj8A</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">]);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj8B</span><span class="p">);</span>

<span class="c1">// { name: &#39;colin&#39; }</span>
<span class="c1">// { car: &#39;suzuki&#39;, age: 17 }</span>
</pre></div>
</li>
<li><p class="first">Random pick elements</p>
<div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">luckyDraw</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Colin&quot;</span><span class="p">,</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;James&quot;</span><span class="p">,</span> <span class="s2">&quot;Lily&quot;</span><span class="p">,</span> <span class="s2">&quot;Mary&quot;</span><span class="p">];</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">_</span><span class="p">.</span><span class="nx">sample</span><span class="p">(</span><span class="nx">luckyDraw</span><span class="p">)</span> <span class="p">);</span>
</pre></div>
</li>
<li><p class="first">Array Minus</p>
<div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">obj10A</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Colin&quot;</span><span class="p">,</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;James&quot;</span><span class="p">,</span> <span class="s2">&quot;Lily&quot;</span><span class="p">,</span> <span class="s2">&quot;Mary&quot;</span><span class="p">];</span>
<span class="kr">const</span> <span class="nx">obj10B</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Lily&quot;</span><span class="p">,</span> <span class="s2">&quot;Mary&quot;</span><span class="p">,</span> <span class="s2">&quot;Brian&quot;</span><span class="p">];</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">_</span><span class="p">.</span><span class="nx">difference</span><span class="p">(</span><span class="nx">obj10A</span><span class="p">,</span> <span class="nx">obj10B</span><span class="p">)</span> <span class="p">);</span>
<span class="c1">// [ &#39;Colin&#39;, &#39;John&#39;, &#39;James&#39; ]</span>
</pre></div>
</li>
</ul>
<p><a class="reference external" href="https://colintoh.com/blog/lodash-10-javascript-utility-functions-stop-rewriting">https://colintoh.com/blog/lodash-10-javascript-utility-functions-stop-rewriting</a>
<a class="reference external" href="https://lodash.com/">https://lodash.com/</a></p>
</div>
<div class="section" id="bluebird">
<h2>2. <a class="toc-backref" href="#id3">Bluebird</a></h2>
<p>As it says in github page: Bluebird is a full featured promise library with unmatched performance.</p>
<p>Although since ES6 we can use promises without any further thinking, but when it comes to browsers, it is still difficult, especially when we need to support legacy browsers.</p>
<p>So mainly I use it in frontend. However, there are some attractive features, like cancellable promises.</p>
<div class="highlight"><pre><span></span>const <span class="nv">BPromise</span> <span class="o">=</span> require<span class="o">(</span><span class="s2">&quot;bluebird&quot;</span><span class="o">)</span><span class="p">;</span>
BPromise.config<span class="o">({</span>
  // Enable cancellation
  cancellation: true,
<span class="o">})</span><span class="p">;</span>
const <span class="nv">proA</span> <span class="o">=</span> new BPromise<span class="o">(</span> <span class="o">(</span>res, rej<span class="o">)</span> <span class="o">=</span>&gt; <span class="o">{</span>
  setTimeout<span class="o">(</span> <span class="o">()</span> <span class="o">=</span>&gt; <span class="o">{</span>
    res<span class="o">(</span><span class="s2">&quot;From Bluebird Promise&quot;</span><span class="o">)</span><span class="p">;</span>
  <span class="o">}</span>, <span class="m">1000</span><span class="o">)</span><span class="p">;</span>
<span class="o">})</span><span class="p">;</span>

proA.then<span class="o">(</span> <span class="o">(</span>res<span class="o">)</span> <span class="o">=</span>&gt; <span class="o">{</span>
  console.log<span class="o">(</span>res<span class="o">)</span><span class="p">;</span>
<span class="o">})</span>
console.log<span class="o">(</span><span class="s2">&quot;normal seq&quot;</span><span class="o">)</span><span class="p">;</span>

const <span class="nv">proB</span> <span class="o">=</span> new BPromise<span class="o">(</span> <span class="o">(</span>res, rej<span class="o">)</span> <span class="o">=</span>&gt; <span class="o">{</span>
  setTimeout<span class="o">(</span> <span class="o">()</span> <span class="o">=</span>&gt; <span class="o">{</span>
    res<span class="o">(</span><span class="s2">&quot;never will enter here Bluebird Promise&quot;</span><span class="o">)</span><span class="p">;</span>
  <span class="o">}</span>, <span class="m">1000</span><span class="o">)</span><span class="p">;</span>
<span class="o">})</span><span class="p">;</span>

proB.then<span class="o">(</span> <span class="o">(</span>res<span class="o">)</span> <span class="o">=</span>&gt; <span class="o">{</span>
  console.log<span class="o">(</span>res<span class="o">)</span><span class="p">;</span>
<span class="o">})</span><span class="p">;</span>
proB.cancel<span class="o">()</span><span class="p">;</span>
console.log<span class="o">(</span><span class="s2">&quot;after canceled&quot;</span><span class="o">)</span><span class="p">;</span>

// normal seq
// after canceled
// From Bluebird Promise
</pre></div>
<p><a class="reference external" href="http://bluebirdjs.com/docs/why-bluebird.html">http://bluebirdjs.com/docs/why-bluebird.html</a></p>
</div>
<div class="section" id="superagent">
<h2>3. <a class="toc-backref" href="#id4">superagent</a></h2>
<ul class="simple">
<li>whatwg-fetch (fetch polyfill)</li>
<li>superagent (IE9+ and Node)</li>
<li>axios (IE 11+ and Node)</li>
<li>request (Node)</li>
</ul>
<p>All these are famous HTTP Client. All is very developer friendly</p>
<div class="highlight"><pre><span></span>const <span class="nv">superagent</span> <span class="o">=</span> require<span class="o">(</span><span class="s1">&#39;superagent&#39;</span><span class="o">)</span><span class="p">;</span>

// callback
superagent
  .get<span class="o">(</span><span class="s1">&#39;https://github.com/visionmedia/superagent&#39;</span><span class="o">)</span>
  .then<span class="o">(</span> <span class="o">(</span>res<span class="o">)</span> <span class="o">=</span>&gt; <span class="o">{</span>
    console.log<span class="o">(</span>res<span class="o">)</span><span class="p">;</span>
  <span class="o">})</span><span class="p">;</span>
</pre></div>
<p><a class="reference external" href="https://medium.com/&#64;kartikag01/fetch-vs-axios-vs-request-promise-vs-superagent-8e78fa358d17">https://medium.com/&#64;kartikag01/fetch-vs-axios-vs-request-promise-vs-superagent-8e78fa358d17</a></p>
</div>

    </div><!-- /.entry-content -->

    
    <div class="comments">
      <br />
      <br />
      <hr />
      <h2>Comments !</h2>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_shortname = 'brianshen1990';
        var disqus_identifier = 'Basic_Useful_Node_Libraries.html';
        var disqus_url = 'https://brianshen1990.github.io/Basic_Useful_Node_Libraries.html';
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//brianshen1990.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the comments.</noscript>
    </div>

  </article>
</section>
    </div>
    <div class="_right">
<div> 
<div class="_sideAboutme">
    <h2 class="_breif">About the blog</h2>
    <p>Some notes at work and life to share</p>
    <div>
        <img src="/images/logo/logo.svg"">
        <p>Brian Shen</p>
    </div>
  </div><div class="_sideCategories _sideBar">
  <h2 class="_breif">Categories</h2>
  <ol>
      <li>
        <a href="https://brianshen1990.github.io/category/tools.html">Tools </a><span>10</span>
      </li>
      <li>
        <a href="https://brianshen1990.github.io/category/web.html">Web </a><span>10</span>
      </li>
      <li>
        <a href="https://brianshen1990.github.io/category/security.html">Security </a><span>9</span>
      </li>
      <li class="active">
        <a href="https://brianshen1990.github.io/category/node.html">Node </a><span>8</span>
      </li>
      <li>
        <a href="https://brianshen1990.github.io/category/docker.html">Docker </a><span>1</span>
      </li>
      <li>
        <a href="https://brianshen1990.github.io/category/linux.html">Linux </a><span>1</span>
      </li>
      <li>
        <a href="https://brianshen1990.github.io/category/python.html">Python </a><span>1</span>
      </li>
  </ol>

</div><div class="_sideTags _sideBar">
  <h2 class="_breif">Tags</h2>
  <ol>
      <li>
        <a href="https://brianshen1990.github.io/tag/web.html">Web </a><span>14</span>
      </li>
      <li>
        <a href="https://brianshen1990.github.io/tag/node.html">Node </a><span>12</span>
      </li>
      <li>
        <a href="https://brianshen1990.github.io/tag/security.html">Security </a><span>9</span>
      </li>
      <li>
        <a href="https://brianshen1990.github.io/tag/web-security.html">Web Security </a><span>9</span>
      </li>
      <li>
        <a href="https://brianshen1990.github.io/tag/linux.html">Linux </a><span>7</span>
      </li>
      <li>
        <a href="https://brianshen1990.github.io/tag/centos7.html">CentOS7 </a><span>5</span>
      </li>
      <li>
        <a href="https://brianshen1990.github.io/tag/css.html">CSS </a><span>3</span>
      </li>
      <li>
        <a href="https://brianshen1990.github.io/tag/react.html">React </a><span>3</span>
      </li>
      <li>
        <a href="https://brianshen1990.github.io/tag/reflux.html">Reflux </a><span>3</span>
      </li>
      <li>
        <a href="https://brianshen1990.github.io/tag/store.html">Store </a><span>3</span>
      </li>
  </ol>

</div></div>
    </div>
  </div>
  <footer class="_footer">
    <div>
      <p>Powered by <a href="http://getpelican.com/">Pelican</a></p>
    </div>
  </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-107750695-1', 'auto');
    ga('send', 'pageview');
    </script>
</body>
</html>